<p-toast></p-toast>
<div class="admin-page">
  <p-card
    [header]="'Kardex - detalles'"
    subheader="Kardex del producto seleccionado"
  >
    <div class="p-grid p-mb-5">
      <div class="p-col-12">
        <p-toolbar>
          <div class="p-toolbar-group-left"></div>
          <div class="p-toolbar-group-right">
            <p-button
              styleClass="p-button-success p-mr-2"
              [label]="'Exportar excel'"
              icon="pi pi-file-excel"
              (click)="exportarExcel()"
            ></p-button>
            <p-button
              styleClass="p-button-secondary"
              label="Cancle"
              icon="pi pi-arrow-circle-left"
              (click)="onCancle()"
            ></p-button>
          </div>
        </p-toolbar>
      </div>
    </div>
    <div class="p-grid">
      <div class="p-col-12">

        <p><button id="btnxd" >Sort</button></p>

        <tr>
          <th></th>
          <th></th>
          <th colspan="3" style="text-align:center;">Entradas</th>
          <th colspan="3" style="text-align:center;">Salidas</th>
          <th colspan="3" style="text-align:center;">Existencias</th>
        </tr>

        <table
          id="example"
          class="table table-striped table-bordered"
          style="width: 100%"
        >
          <thead class="thead-dark">

            <tr>
              <th class="th-sm" onclick="sortTable(0)">Fecha</th>
              <th class="th-sm">Descripcion</th>
              <th class="th-sm">Cantidad</th>
              <th class="th-sm">Precio</th>
              <th class="th-sm">Valor Total</th>
              <th class="th-sm">Cantidad</th>
              <th class="th-sm">Precio</th>
              <th class="th-sm">Valor Total</th>
              <th class="th-sm">Cantidad</th>
              <th class="th-sm">Precio</th>
              <th class="th-sm">Valor Total</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let compraProducto of compraProductos; index">
              <td>
                {{ compraProducto.fecha_create | date: 'dd/MM/yyyy HH:mm' }}
              </td>
              <td>{{ compraProducto.detalle }}</td>
              <td>S/. {{ compraProducto.precio_compra }}</td>
              <td>{{ compraProducto.cantidad }}</td>
              <td>
                S/.
                {{ compraProducto.precio_compra * compraProducto.cantidad! }}
              </td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let ventaProducto of ventaProductos; index">
              <td>
                {{ ventaProducto.fecha_pedido | date: 'dd/MM/yyyy HH:mm' }}
              </td>
              <td>Venta - {{ ventaProducto.usuario.nombre }}</td>
              <td></td>
              <td></td>
              <td></td>
              <td>{{ ventaProducto.order_prods![0].cantidad }}</td>
              <td>S/. {{ ventaProducto.order_prods![0].producto.precio }}</td>
              <td>
                S/.
                {{
                  ventaProducto.order_prods![0].producto.precio *
                    ventaProducto.order_prods![0].cantidad!
                }}
              </td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          </tbody>
        </table>

        <!-- <p-table [value]="[{}]" styleClass="p-datatable-gridlines"
        >
          <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="fecha_create">Fecha <p-sortIcon field="fecha_create"></p-sortIcon></th>
                <th class="th-sm">
                  Descripcion
                </th>
                <th class="th-sm">
                  Cantidad
                </th>
                <th class="th-sm">
                  Precio
                </th>
                <th class="th-sm">
                  Valor Total
                </th>
                <th class="th-sm">
                  Cantidad
                </th>
                <th class="th-sm">
                  Precio
                </th>
                <th class="th-sm">
                  Valor Total
                </th>
                <th class="th-sm">
                  Cantidad
                </th>
                <th class="th-sm">
                  Precio
                </th>
                <th class="th-sm">
                  Valor Total
                </th>

              </tr>
          </ng-template>
          <ng-template pTemplate="body" >
            <tr *ngFor="let compraProducto of compraProductos; index">
              <td>{{ compraProducto.fecha_create | date: 'short'}}</td>
              <td>{{ compraProducto.detalle }}</td>
              <td>S/. {{ compraProducto.precio_compra }}</td>
              <td>{{ compraProducto.cantidad }}</td>
              <td>S/. {{ compraProducto.precio_compra * compraProducto.cantidad!}}</td>
              <td> </td>
              <td> </td>
              <td> </td>
              <td> </td>
              <td> </td>
              <td> </td>
            </tr>
            <tr *ngFor="let ventaProducto of ventaProductos; index">
              <td>{{ ventaProducto.fecha_pedido | date: 'short'}}</td>
              <td>Venta - {{ventaProducto.usuario.nombre}}</td>
              <td> </td>
              <td> </td>
              <td> </td>
              <td>{{ ventaProducto.order_prods![0].cantidad }}</td>
              <td>S/. {{ ventaProducto.order_prods![0].producto.precio }}</td>
              <td>S/. {{ ventaProducto.order_prods![0].producto.precio * ventaProducto.order_prods![0].cantidad!  }}</td>
              <td> </td>
              <td> </td>
              <td> </td>
            </tr>
          </ng-template>
        </p-table> -->
      </div>
    </div>
  </p-card>
</div>
